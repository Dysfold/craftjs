"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.runTheThing = exports.generateRecursiveDef = exports.generateClassDefinition = exports.generateMethodDefinition = void 0;
const parser_1 = require("./parser");
const java_io_1 = require("java.io");
function getClassRef(ref) {
    if (ref.package === '') {
        return ref.name;
    }
    const path = [ref.package, ref.name].join('.').split('.').join('_');
    return path;
}
function parseName(name) {
    if (name === 'function')
        return 'func';
    if (name === 'in')
        return 'inp';
    if (name === 'with')
        return 'wit';
    return name;
}
function generateTypeDefinition(type, deps) {
    const wrap = (str) => (type.isArray ? `JArray<${str}>` : str);
    const suffix = type.isArray ? '[]' : '';
    if (typeof type.baseClass !== 'string') {
        if (['int', 'long', 'double', 'float', 'byte', 'short'].indexOf(type.baseClass.name) !== -1) {
            return wrap('number');
        }
        if (type.baseClass.name === 'char') {
            return wrap('string');
        }
        if (type.baseClass.name === 'String' &&
            type.baseClass.package === 'java.lang') {
            return wrap('string');
        }
        if (['boolean', 'void'].indexOf(type.baseClass.name) !== -1) {
            return type.baseClass.name;
        }
        deps.push(type.baseClass);
    }
    const baseType = typeof type.baseClass === 'string'
        ? type.baseClass
        : getClassRef(type.baseClass);
    const typeArgs = type.typeArguments.map((t) => 'baseClass' in t
        ? generateTypeDefinition(t, deps)
        : t.extends
            ? generateTypeDefinition(t.extends, deps)
            : 'any');
    return wrap(`${baseType}${typeArgs.length > 0 ? `<${typeArgs.join(', ')}>` : ''}`);
}
function generateTypeParamDefinition({ name, extends: ex }, deps) {
    return `${name}${ex ? ` extends ${generateTypeDefinition(ex, deps)}` : ''}`;
}
function generateMethodDefinition(method, deps) {
    const paramDefs = method.parameters.map((p) => `${p.spread ? '...' : ''}${parseName(p.name)}: ${generateTypeDefinition(p.type, deps)}${p.nullable ? ' | null' : ''}`);
    const returnDef = 'returnType' in method
        ? generateTypeDefinition(method.returnType, deps)
        : '';
    const nullableDef = method.nullable ? ' | null' : '';
    const typeParams = method.typeParameters.map((t) => generateTypeParamDefinition(t, deps));
    return `${method.docs ? `/** ${method.docs} */\n` : ''}${method.isStatic ? 'static ' : ''}${parseName(method.name)}${typeParams.length > 0 ? `<${typeParams.join(', ')}>` : ''}(${paramDefs.join(', ')})${returnDef ? `: ${returnDef}${nullableDef}` : ''};`;
}
exports.generateMethodDefinition = generateMethodDefinition;
function generatePropertyDefinition(property, deps) {
    if (property.name === 'constructor') {
        return '';
    }
    const nullableDef = property.nullable ? ' | null' : '';
    const typeDef = generateTypeDefinition(property.type, deps);
    return `${property.docs ? `/** ${property.docs} */\n` : ''}${property.isStatic ? 'static ' : ''}${property.name}: ${typeDef}${nullableDef};`;
}
function generateImportDefinitions(deps) {
    const set = {};
    deps.forEach((d) => (set[d.package] = set[d.package]
        ? Object.assign(Object.assign({}, set[d.package]), { [d.name]: d }) : { [d.name]: d }));
    const imports = Object.keys(set)
        .map((k) => {
        const subImports = Object.keys(set[k]);
        return (k &&
            `import { ${subImports
                .map((s) => `${s} as ${getClassRef(set[k][s])}`)
                .join(', ')} } from '${k}';`);
    })
        .filter((i) => i);
    return imports;
}
function generateClassDefinition(clazz) {
    const dependencies = [];
    if (clazz.ref.name === 'Object' && clazz.ref.package === 'java.lang') {
        return {
            definition: `
declare module '${clazz.ref.package}' {  
  export type ${clazz.ref.name} = {}
}`,
            dependencies: [],
        };
    }
    const methodDefs = clazz.methods
        .map((m) => generateMethodDefinition(m, dependencies))
        .sort();
    const getters = clazz.methods.filter((m) => m.name.match(/^get[A-Z]/g));
    const getterFields = getters.map((g) => {
        const replaced = g.name.replace(/^get/, '');
        return Object.assign(Object.assign({}, g), { type: g.returnType, name: replaced[0].toLocaleLowerCase() + replaced.slice(1) });
    });
    const constructorDefs = clazz.constructors
        .map((c) => generateMethodDefinition(c, dependencies))
        .sort();
    const propDefs = clazz.properties
        .concat(getterFields)
        .filter((p) => p.isPublic)
        .map((p) => generatePropertyDefinition(p, dependencies))
        .sort();
    const extend = clazz.extends
        ? generateTypeDefinition(clazz.extends, dependencies)
        : undefined;
    const impls = clazz.implements.map((i) => generateTypeDefinition(i, dependencies));
    const typeParams = clazz.typeParameters.map((t) => generateTypeParamDefinition(t, dependencies));
    const imports = generateImportDefinitions(dependencies);
    return {
        definition: `
declare module '${clazz.ref.package}' {
${imports.join('\n')}
${clazz.docs ? `/** ${clazz.docs} */\n` : ''}
  export class ${clazz.ref.name}${typeParams.length > 0 ? `<${typeParams.join(', ')}>` : ''}${extend ? ` extends ${extend}` : ''}${impls.length > 0 ? ` implements ${impls.join(', ')}` : ''} {
${propDefs.join('\n')}
${methodDefs.join('\n')}
${constructorDefs.join('\n')}
  }
}`,
        dependencies,
    };
}
exports.generateClassDefinition = generateClassDefinition;
function getClass(ref) {
    try {
        const jClass = Java.type(`${ref.package}.${ref.name}`);
        return parser_1.parseClass(jClass.class);
    }
    catch (_a) {
        console.error(`Error parsing ${ref.package}.${ref.name}`);
        return null;
    }
}
function recursiveDefs(clazz, defs, visited) {
    const root = generateClassDefinition(clazz);
    defs.push({
        ref: clazz.ref,
        def: root.definition,
    });
    for (const dep of root.dependencies) {
        const current = getClassRef(dep);
        if (visited.indexOf(current) !== -1) {
            continue;
        }
        visited.push(current);
        const c = getClass(dep);
        if (!c) {
            continue;
        }
        recursiveDefs(c, defs, visited);
    }
}
function generateRecursiveDef(root) {
    const defs = [];
    const visited = [getClassRef(root.ref)];
    recursiveDefs(root, defs, visited);
    return defs;
}
exports.generateRecursiveDef = generateRecursiveDef;
function runTheThing() {
    const cFile = new java_io_1.File(__jsdir, `internal/src/ts/classes.txt`);
    const spigotClasses = readFile(cFile.getPath()).split('\n');
    const defs = [];
    const visited = [];
    for (const c of spigotClasses) {
        console.log(c);
        try {
            const jClass = Java.type(c).class;
            const parsed = parser_1.parseClass(jClass);
            visited.push(getClassRef(parsed.ref));
            recursiveDefs(parsed, defs, visited);
        }
        catch (e) {
            console.error(e);
            continue;
        }
    }
    const contents = {};
    for (const d of defs) {
        const path = [d.ref.package, d.ref.name].join('.').split('.');
        const filePath = path.slice(0, 2).join('_');
        const f = `./js/types/generated/${filePath}.d.ts`;
        contents[f] = contents[f]
            ? `${contents[f]}\n//@ts-nocheck\n${d.def}`
            : `//@ts-nocheck\n${d.def}`;
    }
    for (const file in contents) {
        writeFile(file, contents[file]);
    }
}
exports.runTheThing = runTheThing;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90cy9nZW5lcmF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLHFDQVNrQjtBQUNsQixxQ0FBK0I7QUFFL0IsU0FBUyxXQUFXLENBQUMsR0FBYTtJQUNoQyxJQUFJLEdBQUcsQ0FBQyxPQUFPLEtBQUssRUFBRSxFQUFFO1FBQ3RCLE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQztLQUNqQjtJQUNELE1BQU0sSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDcEUsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBRUQsU0FBUyxTQUFTLENBQUMsSUFBWTtJQUM3QixJQUFJLElBQUksS0FBSyxVQUFVO1FBQUUsT0FBTyxNQUFNLENBQUM7SUFDdkMsSUFBSSxJQUFJLEtBQUssSUFBSTtRQUFFLE9BQU8sS0FBSyxDQUFDO0lBQ2hDLElBQUksSUFBSSxLQUFLLE1BQU07UUFBRSxPQUFPLEtBQUssQ0FBQztJQUNsQyxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFFRCxTQUFTLHNCQUFzQixDQUFDLElBQVUsRUFBRSxJQUFnQjtJQUMxRCxNQUFNLElBQUksR0FBRyxDQUFDLEdBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0RSxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUV4QyxJQUFJLE9BQU8sSUFBSSxDQUFDLFNBQVMsS0FBSyxRQUFRLEVBQUU7UUFDdEMsSUFDRSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUN6RCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FDcEIsS0FBSyxDQUFDLENBQUMsRUFDUjtZQUNBLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3ZCO1FBQ0QsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksS0FBSyxNQUFNLEVBQUU7WUFDbEMsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDdkI7UUFDRCxJQUNFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxLQUFLLFFBQVE7WUFDaEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEtBQUssV0FBVyxFQUN0QztZQUNBLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3ZCO1FBQ0QsSUFBSSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtZQUMzRCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO1NBQzVCO1FBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7S0FDM0I7SUFFRCxNQUFNLFFBQVEsR0FDWixPQUFPLElBQUksQ0FBQyxTQUFTLEtBQUssUUFBUTtRQUNoQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVM7UUFDaEIsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDbEMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUM1QyxXQUFXLElBQUksQ0FBQztRQUNkLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTztZQUNYLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQztZQUN6QyxDQUFDLENBQUMsS0FBSyxDQUNWLENBQUM7SUFDRixPQUFPLElBQUksQ0FDVCxHQUFHLFFBQVEsR0FBRyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUN0RSxDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsMkJBQTJCLENBQ2xDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQWlCLEVBQ3BDLElBQWdCO0lBRWhCLE9BQU8sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxZQUFZLHNCQUFzQixDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUM5RSxDQUFDO0FBRUQsU0FBZ0Isd0JBQXdCLENBQ3RDLE1BQTRCLEVBQzVCLElBQWdCO0lBRWhCLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUNyQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ0osR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLHNCQUFzQixDQUNyRSxDQUFDLENBQUMsSUFBSSxFQUNOLElBQUksQ0FDTCxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ3BDLENBQUM7SUFDRixNQUFNLFNBQVMsR0FDYixZQUFZLElBQUksTUFBTTtRQUNwQixDQUFDLENBQUMsc0JBQXNCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUM7UUFDakQsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNULE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ3JELE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDakQsMkJBQTJCLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUNyQyxDQUFDO0lBQ0YsT0FBTyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQ3BELE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFDaEMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUN2QixVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQ3pELElBQUksU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFDdEIsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLFNBQVMsR0FBRyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDL0MsR0FBRyxDQUFDO0FBQ04sQ0FBQztBQTFCRCw0REEwQkM7QUFFRCxTQUFTLDBCQUEwQixDQUFDLFFBQWtCLEVBQUUsSUFBZ0I7SUFDdEUsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLGFBQWEsRUFBRTtRQUNuQyxPQUFPLEVBQUUsQ0FBQztLQUNYO0lBRUQsTUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDdkQsTUFBTSxPQUFPLEdBQUcsc0JBQXNCLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1RCxPQUFPLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxRQUFRLENBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FDeEQsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUNsQyxHQUFHLFFBQVEsQ0FBQyxJQUFJLEtBQUssT0FBTyxHQUFHLFdBQVcsR0FBRyxDQUFDO0FBQ2hELENBQUM7QUFFRCxTQUFTLHlCQUF5QixDQUFDLElBQWdCO0lBQ2pELE1BQU0sR0FBRyxHQUE2QyxFQUFFLENBQUM7SUFDekQsSUFBSSxDQUFDLE9BQU8sQ0FDVixDQUFDLENBQUMsRUFBRSxFQUFFLENBQ0osQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO1FBQzlCLENBQUMsaUNBQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQ2xDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQ3ZCLENBQUM7SUFDRixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztTQUM3QixHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtRQUNULE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdkMsT0FBTyxDQUNMLENBQUM7WUFDRCxZQUFZLFVBQVU7aUJBQ25CLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLE9BQU8sV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7aUJBQy9DLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FDL0IsQ0FBQztJQUNKLENBQUMsQ0FBQztTQUNELE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEIsT0FBTyxPQUFPLENBQUM7QUFDakIsQ0FBQztBQUVELFNBQWdCLHVCQUF1QixDQUFDLEtBQVk7SUFDbEQsTUFBTSxZQUFZLEdBQWUsRUFBRSxDQUFDO0lBRXBDLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssUUFBUSxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxLQUFLLFdBQVcsRUFBRTtRQUNwRSxPQUFPO1lBQ0wsVUFBVSxFQUFFO2tCQUNBLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTztnQkFDbkIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJO0VBQzVCO1lBQ0ksWUFBWSxFQUFFLEVBQUU7U0FDakIsQ0FBQztLQUNIO0lBRUQsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU87U0FDN0IsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUM7U0FDckQsSUFBSSxFQUFFLENBQUM7SUFFVixNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUN4RSxNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7UUFDckMsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzVDLE9BQU8sZ0NBQ0YsQ0FBQyxLQUNKLElBQUksRUFBRSxDQUFDLENBQUMsVUFBVSxFQUNsQixJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FDOUMsQ0FBQztJQUNoQixDQUFDLENBQUMsQ0FBQztJQUVILE1BQU0sZUFBZSxHQUFHLEtBQUssQ0FBQyxZQUFZO1NBQ3ZDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDO1NBQ3JELElBQUksRUFBRSxDQUFDO0lBQ1YsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLFVBQVU7U0FDOUIsTUFBTSxDQUFDLFlBQVksQ0FBQztTQUNwQixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUM7U0FDekIsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUM7U0FDdkQsSUFBSSxFQUFFLENBQUM7SUFDVixNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsT0FBTztRQUMxQixDQUFDLENBQUMsc0JBQXNCLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxZQUFZLENBQUM7UUFDckQsQ0FBQyxDQUFDLFNBQVMsQ0FBQztJQUNkLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDdkMsc0JBQXNCLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUN4QyxDQUFDO0lBQ0YsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUNoRCwyQkFBMkIsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQzdDLENBQUM7SUFDRixNQUFNLE9BQU8sR0FBRyx5QkFBeUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUN4RCxPQUFPO1FBQ0wsVUFBVSxFQUFFO2tCQUNFLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTztFQUNqQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztFQUNsQixLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLEtBQUssQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtpQkFDM0IsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQ3pCLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFDekQsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLFlBQVksTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FDbkMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUN6RDtFQUNGLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0VBQ25CLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0VBQ3JCLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDOztFQUUxQjtRQUNFLFlBQVk7S0FDYixDQUFDO0FBQ0osQ0FBQztBQTlERCwwREE4REM7QUFFRCxTQUFTLFFBQVEsQ0FBQyxHQUFhO0lBQzdCLElBQUk7UUFDRixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUN2RCxPQUFPLG1CQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ2pDO0lBQUMsV0FBTTtRQUNOLE9BQU8sQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEdBQUcsQ0FBQyxPQUFPLElBQUksR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDMUQsT0FBTyxJQUFJLENBQUM7S0FDYjtBQUNILENBQUM7QUFFRCxTQUFTLGFBQWEsQ0FDcEIsS0FBWSxFQUNaLElBQXNDLEVBQ3RDLE9BQWlCO0lBRWpCLE1BQU0sSUFBSSxHQUFHLHVCQUF1QixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDUixHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUc7UUFDZCxHQUFHLEVBQUUsSUFBSSxDQUFDLFVBQVU7S0FDckIsQ0FBQyxDQUFDO0lBQ0gsS0FBSyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO1FBQ25DLE1BQU0sT0FBTyxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqQyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDbkMsU0FBUztTQUNWO1FBQ0QsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN0QixNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLENBQUMsRUFBRTtZQUNOLFNBQVM7U0FDVjtRQUNELGFBQWEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0tBQ2pDO0FBQ0gsQ0FBQztBQUVELFNBQWdCLG9CQUFvQixDQUFDLElBQVc7SUFDOUMsTUFBTSxJQUFJLEdBQXFDLEVBQUUsQ0FBQztJQUNsRCxNQUFNLE9BQU8sR0FBYSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNsRCxhQUFhLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNuQyxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFMRCxvREFLQztBQUVELFNBQWdCLFdBQVc7SUFDekIsTUFBTSxLQUFLLEdBQUcsSUFBSSxjQUFJLENBQUMsT0FBTyxFQUFFLDZCQUE2QixDQUFDLENBQUM7SUFDL0QsTUFBTSxhQUFhLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM1RCxNQUFNLElBQUksR0FBcUMsRUFBRSxDQUFDO0lBQ2xELE1BQU0sT0FBTyxHQUFhLEVBQUUsQ0FBQztJQUM3QixLQUFLLE1BQU0sQ0FBQyxJQUFJLGFBQWEsRUFBRTtRQUM3QixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2YsSUFBSTtZQUNGLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1lBQ2xDLE1BQU0sTUFBTSxHQUFHLG1CQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDbEMsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDdEMsYUFBYSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDdEM7UUFBQyxPQUFPLENBQUMsRUFBRTtZQUNWLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakIsU0FBUztTQUNWO0tBQ0Y7SUFFRCxNQUFNLFFBQVEsR0FBMkIsRUFBRSxDQUFDO0lBRTVDLEtBQUssTUFBTSxDQUFDLElBQUksSUFBSSxFQUFFO1FBQ3BCLE1BQU0sSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzlELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM1QyxNQUFNLENBQUMsR0FBRyx3QkFBd0IsUUFBUSxPQUFPLENBQUM7UUFDbEQsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDdkIsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEdBQUcsRUFBRTtZQUMzQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztLQUMvQjtJQUVELEtBQUssTUFBTSxJQUFJLElBQUksUUFBUSxFQUFFO1FBQzNCLFNBQVMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7S0FDakM7QUFDSCxDQUFDO0FBaENELGtDQWdDQyJ9